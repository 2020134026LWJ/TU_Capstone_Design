현재 상황
ArUco 마커 기반의 격자형 맵
2~3대 AGV
중앙 서버에서 경로 계획 MQTT로 로봇에 전달
실시간성은 중간 정도, 안정성이 중요

단계	추천 알고리즘							이유
1.	A*									가장 간단하고 안정적 (기본형 완성용)
2.	Prioritized A* (우선순위 + 예약 테이블)			다중 로봇 확장 가능, 구현 쉬움
3.	WHCA* (Windowed Hierarchical Cooperative A*)		시간 예약 기반 충돌 방지
4.	CBS (Conflict-Based Search)					완전한 충돌 없는 최적경로, 단 계산량 큼


AGV에서 고려해야 하는 최적의 의미
거리 최적화			이동 거리 최소화
시간 최적화			전체 작업 완료 시간 최소화 (makespan)
충돌 최소화			경로 간 간섭 최소화
회전/가속 최소화		실제 주행 안정성 향상
에너지 최적화		모터 소비 전력 최소화


기본 A*
입력: 맵, 시작점, 목표점
출력: (x, y)로 구성된 최단 경로
휴리스틱 h(n)을 이용해 거리 + 추정치 최소화

Prioritized A* - (x, y) 테이블에 t라는 시간차원 추가 -> (x, y, t)				가장 적합!!!!!!!!!
A* 알고리즘을 기본으로 하되, 여러 로봇이 동시에 경로를 탐색할 때 우선순위와 예약 테이블(reservation table) 을 적용해서 충돌을 피하는 방식 


단계	내용												OS 스케줄링 비유
①	각 로봇에 우선순위(priority) 부여							프로세스 우선순위
②	우선순위 높은 로봇부터 A* 실행							높은 우선순위 프로세스 먼저 실행
③	A* 탐색 시, 이미 예약된 (x, y, t) 칸은 사용 금지					이미 점유된 CPU 시간대 피함
④	탐색 완료 후, 해당 로봇의 경로를 예약 테이블(reserved set) 에 등록		스케줄러가 실행 기록 남김
⑤	다음 로봇이 A* 실행 시 이 예약 정보를 참고하여 충돌 피함			시간 슬롯 기반 멀티프로세싱

마커 만날 때마다 서버에 보고 → 경로 체크
→ 경로계획 알고리즘이 아니라 상태 모니터링 로직

경로 벗어나거나, 충돌 위험 보이면
→ 그때 현재 마커를 시작점으로 Prioritized A* 를 다시 돌리면 된다


WHCA*가 필요한 경우는 이런 케이스
동적 장애물이 계속 생김 (사람, 다른 차량, 포크리프트 등)
로봇 수가 많고, 서로 복잡하게 얽혀 다님
ROS 기반으로 10Hz, 20Hz 단위로 계속 플래너를 갱신해야 함


작업 할당 Auction - based
교통 통제 Path Resevation
경로 계획 A - star


시뮬레이션 하는법
1. 직접 Python으로 2D 시뮬레이터 만들기 (matplotlib / pygame)
2. Webots / CoppeliaSim + Python API
Webots
무료, 로봇 시뮬레이션에 특화
Python 컨트롤러 지원
장애물, 카메라, 센서 등 쉽게 붙일 수 있음

CoppeliaSim (옛 V-REP)
강력한 물리 시뮬레이터
Python API 있음
여러 로봇 동시에 제어하기 좋음

이룬 툴들을 쓰면:
서버(Python)에서 MQTT or TCP로 명령을 보내고 시뮬레이터 쪽 Python 컨트롤러가 그걸 받아서 가상의 AGV 모델을 움직여 줌


